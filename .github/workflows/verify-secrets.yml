name: Verify Secrets
on: workflow_dispatch

jobs:
    verify:
        runs-on: ubuntu-latest
        steps:
            - name: Verify Key Checksums
              run: |
                  echo "--- Secret Checksums (Compare these with local values) ---"

                  # Helper function to print hash
                  print_hash() {
                    name=$1
                    val=$2
                    if [ -z "$val" ]; then
                      echo "$name: [EMPTY/MISSING]"
                    else
                      # Use sha256sum, trim output
                      hash=$(echo -n "$val" | sha256sum | cut -d ' ' -f 1)
                      echo "$name: sha256:$hash"
                    fi
                  }

                  print_hash "TAURI_PRIVATE_KEY" "${{ secrets.TAURI_PRIVATE_KEY }}"
                  print_hash "TAURI_KEY_PASSWORD" "${{ secrets.TAURI_KEY_PASSWORD }}"
                  print_hash "APPLE_SIGNING_IDENTITY" "${{ secrets.APPLE_SIGNING_IDENTITY }}"
                  print_hash "APPLE_CERTIFICATE_PASSWORD" "${{ secrets.APPLE_CERTIFICATE_PASSWORD }}"

                  echo "--------------------------------------------------------"
